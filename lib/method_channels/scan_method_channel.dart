import 'package:ohmalware/commons/constant.dart';
import 'package:ohmalware/commons/enum.dart';

/// Author: Duc Trung Nguyen
/// Created: 28/03/2021
/// Project: ohmalware

class ScanMethodChannel {
  static Future<dynamic> getInformationApp() async {
    try {
      final response = await MethodChannelConstants.channelScanApp
          .invokeMethod('getInformationApp', {});
      return {
        'status': RESPONSE_STATUS_SCAN.success,
        'number': response.length,
        'dataApp': response
      };
    } catch (e) {
      print('ERROR in getInformationApp $e');
      return {
        'status': RESPONSE_STATUS_SCAN.errorScan,
        'number': 0,
        'dataApp': []
      };
    }
  }

  static Future<dynamic> getInformationSingleApp(String package) async {
    try {
      final response = await MethodChannelConstants.channelScanApp
          .invokeMethod('getInformationSingleApp', {'package': package});

      return {'status': RESPONSE_STATUS_SCAN.success, 'dataApp': response};
    } catch (e) {
      print('ERROR in getInformationApp $e');
      return {'status': RESPONSE_STATUS_SCAN.errorApp, 'dataApp': {}};
    }
  }

  static Future<Map<String, dynamic>> unInstallApp(String package) async {
    try {
      final response = await MethodChannelConstants.channelScanApp
          .invokeMethod('uninstallApp', {'package': package});

      if (response == true) {
        print("uninstall ok");
        return {'status': UNINSTALL_APP.success, 'package': package};
      } else {
        return {'status': UNINSTALL_APP.error, 'package': package};
      }
    } catch (e) {
      print('ERROR in getInformationApp $e');
      return {'status': UNINSTALL_APP.error, 'package': package};
    }
  }
}
